---
title: 系统架构知识点
date: 2024-02-22 09:18:54
tags: 
- Java
- Web
- 架构
---

# 系统架构发展

> 单一应用架构->垂直应用架构（将整个系统按应用模块划分多个系统）->分布式服务架构(集群) ->流动计算架构微服务架构 -> ?

### 分布式
分布式就是将垂直架构里面共性的业务逻辑抽取出来作为独立的服务。
    缺点，系统间耦合度变高关系错综复杂难以维护。
    ![分布式](http://681314.com/zb_users/upload/2023/05/20230505211930_68021jpg)

### SOA架构
基于分布式架构，增加一个调度中心对集群进行实时管理，资源调度和治理中心，面向服务的架构SOA。
    ![SOA](http://681314.com/zb_users/upload/2023/05/20230505211930_47905jpg)
    
    优点
    - 使用注册中心解决了服务间调用关系的自动调节
    缺点
    - 服务间会有依赖关系一旦某个环节出错会影响较大( 服务雪崩 )。
    - 服务关心复杂运维、测试部署困难。


### 微服务架构
   SOA的基础上进行彻底拆分服务
    ![微服务](http://681314.com/zb_users/upload/2023/05/20230505211930_66891jpg)
    
    优点
    - 服务原子化拆分独立打包，部署和升级保证每个微服务清晰的任务划分利于扩展.
    - 微服务之间采用RESTful等轻量级Http协议相互调用。
    - 服务各自有自己单独的职责服务之间松耦合避免因一个模块的问题导致服务崩溃
    缺点
    - 分布式系统开发的技术成本高容错、分布式事务等。
    总结
    - 服务治理和服务监控关键。
    - 多服务运维难度随着服务的增加运维的压力也在增大

### 服务治理
- 服务注册
- 服务发现
- 服务剔除


### 服务调用
- RESTFul http协议 性能低，灵活度高 微服务架构
- RPC     tcp 性能高 灵活度低  soa架构

RPCRemote Promote Call一种进程间通信方式
- 允许像调用本地服务一样调用远程服务。RPC框架的主要目标就是让远程服务调用更简单、透明。RPC框架负责屏蔽底层的传输方式、序列化方式和通信细节。
- 开发人员在使用的时候只需要了解谁在什么位置提供了什么样的远程服务接口即可并不需要关心底层通信细节和调用过程。》

### 服务网关

为了解决，调用不同的url,跨域问题，身份认证。
API网关，统一接入到API网关层由网关统一接入和输出。

一个网关的基本功能有统一接入、安全防护、协议适配、流量管控、长短链接支持、容错能力

有了网关之后各个API服务提供团队可以专注于自己的的业务逻辑处理而API网关更专注于安全、流量、路由等问题。

![](http://681314.com/zb_users/upload/2023/05/20230505211931_25292jpg)

### 服务容错
防止雪崩的的三个思想，不被外界影响，不被上游请求压垮，不被下游请求拖垮。

### 链路追踪
随着微服务架构的流行服务按照不同的维度进行拆分一次请求往往需要涉及到多个服务。互联网应用构建在不同的软件模块集上这些软件模块有可能是由不同的团队开发、可能使用不同的编程语言来实现、有可能布在了几千台服务器横跨多个不同的数据中心。因此就需要对一次请求涉及的多个服务链路进行日志记录性能监控即链路追踪。

# 微服务常见的解决方案

1. ServiceComb 华为云 apache
2. SpringCloud （spring Cloud并没有重复制造轮子它只是将目前各家公司开发的比较成熟、经得起实际考验的服务框架组合起来通过Spring Boot风格进行再封装屏蔽掉了复杂的配置和实现原理最终给开发者留出了一套简单易懂、易部署和易维护的分布式系统开发工具包。）
3. Spring Cloud Alibaba
4. Dubbo+Zookeeper 
   Dubbo是什么
   Dubbo是阿里巴巴开源的基于 Java 的高性能 RPC一种远程调用 分布式服务框架SOA致力于提供高性能和透明化的RPC远程服务调用方案以及SOA服务治理方案。因为是阿里开源项目国内很多互联网公司都在用已经经过很多线上考验。内部使用了 Netty、Zookeeper保证了高性能高可用性


# 分布式注册中心
注册中心: nacos ,zookeeper ,nacos ,eureka,consul

微服务相关文章
[《从 0 开始学微服务》阅读笔记](https://blog.stdioa.com/2019/03/geektime-microservice-notes/index.html)

[Zookeeper入门级万字总结](https://zhuanlan.zhihu.com/p/352301245)

[微服务（Microservices）【翻译】](https://cloud.tencent.com/developer/article/1034295)